#!/bin/bash

# Variables de Netplan
NETPLAN_DIR="/etc/netplan"
STATIC_CONFIG="$NETPLAN_DIR/static.bak"
ORIGINAL_CONFIG="$NETPLAN_DIR/original.bak"
ACTIVE_CONFIG="$NETPLAN_DIR/50-cloud-init.yaml"

echo "[INFO] Restaurando configuraci贸n de red para tener acceso a Internet..."
if [ -f "$ORIGINAL_CONFIG" ]; then
    sudo cp "$ORIGINAL_CONFIG" "$ACTIVE_CONFIG"
    sudo netplan apply
    echo "[INFO] Red restaurada temporalmente para descargar paquetes."
else
    echo "[ERROR] No se encontr贸 el archivo original.bak. Revisa la configuraci贸n de Netplan."
    exit 1
fi

# Instalando Bind9
echo "[INFO] Instalando Bind9..."
sudo apt update && sudo apt install -y bind9 bind9utils

if [ $? -ne 0 ]; then
    echo "[ERROR] No se pudo instalar Bind9. Revisa la conexi贸n a Internet."
    exit 1
fi
